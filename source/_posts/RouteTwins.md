---
title: 内外网同时连接的静态路由设置
date: 2023-04-14 15:35:01
tags:
    - [网络]
    - [路由设置]
---

这是简介：
记录通过设置静态路由来让电脑通过两个网卡来不需要切换地同时访问内外网
<!-- more -->

# 记录内外网信息
进入控制面板 --> 网络和Internet --> 网络连接
![](https://raw.githubusercontent.com/marcaas/hexoPicgo/master/20230414155333.png)
点击详细信息分别查看并记录内外网的IPv4地址、IPv4子网掩码以及IPv4默认网关。
# 设置路由
用管理员权限打开终端，输入
```sh
route print -4
```
来查看IPv4的路由设置

输入
```sh
route delete 0.0.0.0
```
来删除默认的路由设置

输入
```sh
route add 0.0.0.0 mask 0.0.0.0 ${外网网关} -p
```
来设置默认数据走外网网关，且子网掩码为默认，设为永久路由

输入
```sh
route add ${内网IP首段}.0.0.0 mask ${内网掩码首段}.0.0.0 ${内网网关} -p
```
设置凡是内网IP首段数字开头的网址，都走内网网关，掩码首段为内网掩码首段，其余为零，设为永久路由

到此为止，路由表添加完毕。

# 删除路由

```sh
route delete ${路由数据}
```

# 将设置代码封装

将下述代码封装，需要设置路由时运行即可
```sh
@echo off
route delete 0.0.0.0
route add 0.0.0.0 mask 0.0.0.0 ${外网网关}
route add ${内网IP首段}.0.0.0 mask ${内网掩码首段}.0.0.0 ${内网网关}
```